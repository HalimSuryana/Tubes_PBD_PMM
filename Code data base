------------------------------------------------------------
-- CREATE DATABASE
------------------------------------------------------------
CREATE DATABASE HotelReservasi;
GO

USE HotelReservasi;
GO

-- ada tabel Tamu, TipeKamar, Kamar, Pegawai, Reservasi,
-- DetailReservasi, MetodePembayaran, Pembayaran, Layanan, DetailLayanan

------------------------------------------------------------
-- TABLE TAMU
------------------------------------------------------------
CREATE TABLE Tamu (
    TamuID INT PRIMARY KEY IDENTITY(1,1),
    NamaTamu VARCHAR(100),
    Alamat TEXT,
    NoTelepon VARCHAR(20),
    Email VARCHAR(100)
);

------------------------------------------------------------
-- TABLE TIPE KAMAR
------------------------------------------------------------
CREATE TABLE TipeKamar (
    TipeKamarID INT PRIMARY KEY IDENTITY(1,1),
    NamaTipe VARCHAR(50),
    HargaPerMalam INT,
    Kapasitas INT
);

------------------------------------------------------------
-- TABLE KAMAR
------------------------------------------------------------
CREATE TABLE Kamar (
    KamarID INT PRIMARY KEY IDENTITY(1,1),
    NomorKamar VARCHAR(10),
    StatusKamar VARCHAR(20),
    TipeKamarID INT,
    FOREIGN KEY (TipeKamarID) REFERENCES TipeKamar(TipeKamarID)
);

------------------------------------------------------------
-- TABLE PEGAWAI
------------------------------------------------------------
CREATE TABLE Pegawai (
    PegawaiID INT PRIMARY KEY IDENTITY(1,1),
    NamaPegawai VARCHAR(100),
    Jabatan VARCHAR(50),
    NoTelepon VARCHAR(20)
);

------------------------------------------------------------
-- TABLE RESERVASI
------------------------------------------------------------
CREATE TABLE Reservasi (
    ReservasiID INT PRIMARY KEY IDENTITY(1,1),
    TanggalCheckIn DATE,
    TanggalCheckOut DATE,
    StatusReservasi VARCHAR(20),
    TamuID INT,
    PegawaiID INT,
    FOREIGN KEY (TamuID) REFERENCES Tamu(TamuID),
    FOREIGN KEY (PegawaiID) REFERENCES Pegawai(PegawaiID)
);

------------------------------------------------------------
-- TABLE DETAIL RESERVASI
------------------------------------------------------------
CREATE TABLE DetailReservasi (
    DetailReservasiID INT PRIMARY KEY IDENTITY(1,1),
    ReservasiID INT,
    KamarID INT,
    FOREIGN KEY (ReservasiID) REFERENCES Reservasi(ReservasiID),
    FOREIGN KEY (KamarID) REFERENCES Kamar(KamarID)
);

------------------------------------------------------------
-- TABLE METODE PEMBAYARAN
------------------------------------------------------------
CREATE TABLE MetodePembayaran (
    MetodeID INT PRIMARY KEY IDENTITY(1,1),
    NamaMetode VARCHAR(50)
);

------------------------------------------------------------
-- TABLE PEMBAYARAN
------------------------------------------------------------
CREATE TABLE Pembayaran (
    PembayaranID INT PRIMARY KEY IDENTITY(1,1),
    TanggalBayar DATE,
    TotalBayar INT,
    StatusPembayaran VARCHAR(20),
    ReservasiID INT,
    MetodeID INT,
    FOREIGN KEY (ReservasiID) REFERENCES Reservasi(ReservasiID),
    FOREIGN KEY (MetodeID) REFERENCES MetodePembayaran(MetodeID)
);

------------------------------------------------------------
-- TABLE LAYANAN
------------------------------------------------------------
CREATE TABLE Layanan (
    LayananID INT PRIMARY KEY IDENTITY(1,1),
    NamaLayanan VARCHAR(100),
    HargaLayanan INT
);

------------------------------------------------------------
-- TABLE DETAIL LAYANAN
------------------------------------------------------------
CREATE TABLE DetailLayanan (
    DetailLayananID INT PRIMARY KEY IDENTITY(1,1),
    ReservasiID INT,
    LayananID INT,
    Jumlah INT,
    FOREIGN KEY (ReservasiID) REFERENCES Reservasi(ReservasiID),
    FOREIGN KEY (LayananID) REFERENCES Layanan(LayananID)
);

------------------------------------------------------------
-- INSERT SAMPLE DATA TAMU
------------------------------------------------------------
INSERT INTO Tamu (NamaTamu, Alamat, NoTelepon, Email) VALUES
('Ahmad Fauzi', 'Bandung', '081234567801', 'ahmad@mail.com'),
('Rina Putri', 'Jakarta', '081234567802', 'rina@mail.com'),
('Dedi Pratama', 'Bekasi', '081234567803', 'dedi@mail.com'),
('Siti Aminah', 'Bogor', '081234567804', 'siti@mail.com'),
('Bayu Saputra', 'Depok', '081234567805', 'bayu@mail.com');

------------------------------------------------------------
-- INSERT SAMPLE DATA TIPE KAMAR
------------------------------------------------------------
INSERT INTO TipeKamar (NamaTipe, HargaPerMalam, Kapasitas) VALUES
('Standard', 300000, 2),
('Deluxe', 450000, 2),
('Suite', 700000, 4);

------------------------------------------------------------
-- INSERT SAMPLE DATA KAMAR
------------------------------------------------------------
INSERT INTO Kamar (NomorKamar, StatusKamar, TipeKamarID) VALUES
('101', 'Tersedia', 1),
('102', 'Tersedia', 1),
('201', 'Tersedia', 2),
('202', 'Tersedia', 2),
('301', 'Tersedia', 3);

------------------------------------------------------------
-- INSERT SAMPLE DATA PEGAWAI
------------------------------------------------------------
INSERT INTO Pegawai (NamaPegawai, Jabatan, NoTelepon) VALUES
('Andi Wijaya', 'Resepsionis', '0821111111'),
('Budi Santoso', 'Admin', '0822222222'),
('Citra Lestari', 'Kasir', '0823333333');

------------------------------------------------------------
-- INSERT SAMPLE DATA RESERVASI
------------------------------------------------------------
INSERT INTO Reservasi (TanggalCheckIn, TanggalCheckOut, StatusReservasi, TamuID, PegawaiID) VALUES
('2025-01-10', '2025-01-12', 'Aktif', 1, 1),
('2025-01-11', '2025-01-13', 'Aktif', 2, 2),
('2025-01-12', '2025-01-14', 'Selesai', 3, 1);

------------------------------------------------------------
-- INSERT SAMPLE DATA DETAIL RESERVASI
------------------------------------------------------------
INSERT INTO DetailReservasi (ReservasiID, KamarID) VALUES
(1, 1),
(2, 3),
(3, 5);

------------------------------------------------------------
-- INSERT SAMPLE DATA METODE PEMBAYARAN
------------------------------------------------------------
INSERT INTO MetodePembayaran (NamaMetode) VALUES
('Cash'),
('Transfer'),
('QRIS');

------------------------------------------------------------
-- INSERT SAMPLE DATA PEMBAYARAN
------------------------------------------------------------
INSERT INTO Pembayaran (TanggalBayar, TotalBayar, StatusPembayaran, ReservasiID, MetodeID) VALUES
('2025-01-10', 600000, 'Lunas', 1, 1),
('2025-01-11', 900000, 'Lunas', 2, 2),
('2025-01-12', 1400000, 'Lunas', 3, 3);

------------------------------------------------------------
-- INSERT SAMPLE DATA LAYANAN
------------------------------------------------------------
INSERT INTO Layanan (NamaLayanan, HargaLayanan) VALUES
('Laundry', 50000),
('Room Service', 75000),
('Spa', 150000);

------------------------------------------------------------
-- INSERT SAMPLE DATA DETAIL LAYANAN
------------------------------------------------------------
INSERT INTO DetailLayanan (ReservasiID, LayananID, Jumlah) VALUES
(1, 1, 2),
(2, 2, 1),
(3, 3, 1);
